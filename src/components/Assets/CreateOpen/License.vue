<template>
  <validation-observer ref="refObserver">
    <div class="dashboard__form__step">
      <div class="dashboard__form__step__title">
        <h3>Select the type of license</h3>
        <p>Select the suitable Creative Commons license. The contract is generated automatically.</p>
      </div>
      <validation-provider v-slot="{ errors }" name="License" rules="required">
        <div class="form-group">
          <label class="control control-radio">
            <div class="svg-label-container">
              <svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36"><path data-name="Path 14352" d="M18 0a17.311 17.311 0 0 1 12.75 5.25A17.311 17.311 0 0 1 36 18a16.621 16.621 0 0 1-5.1 12.6A17.933 17.933 0 0 1 18 36a17.463 17.463 0 0 1-12.6-5.25A17.355 17.355 0 0 1 0 18 17.925 17.925 0 0 1 18 0m0 3.3A14.167 14.167 0 0 0 7.65 7.65a14.161 14.161 0 0 0-4.35 10.5A14.167 14.167 0 0 0 7.65 28.5 14.415 14.415 0 0 0 18 32.85a14.756 14.756 0 0 0 10.5-4.35 13.572 13.572 0 0 0 4.2-10.35 14.756 14.756 0 0 0-4.35-10.5A13.392 13.392 0 0 0 18 3.3m4.8 10.2v7.35h-2.1v8.7h-5.55v-8.7H13.2V13.5a1.146 1.146 0 0 1 .3-.75c.3-.15.45-.3.75-.3h7.35a1.146 1.146 0 0 1 .75.3c.45.15.45.45.45.75m-7.35-4.65a2.55 2.55 0 1 1 5.1 0A2.3 2.3 0 0 1 18 11.4a2.234 2.234 0 0 1-2.55-2.55" fill="#333"/></svg>
              Attribution (CC BY)
            </div>
            <input type="radio" name="license_type" v-model="licenseLocal" value="CC BY" />
            <div class="control_indicator"></div>
          </label>
          <label class="control control-radio">
            <div class="svg-label-container">
              <svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36"><path data-name="Path 14352" d="M18 0a17.311 17.311 0 0 1 12.75 5.25A17.311 17.311 0 0 1 36 18a16.621 16.621 0 0 1-5.1 12.6A17.933 17.933 0 0 1 18 36a17.463 17.463 0 0 1-12.6-5.25A17.355 17.355 0 0 1 0 18 17.925 17.925 0 0 1 18 0m0 3.3A14.167 14.167 0 0 0 7.65 7.65a14.161 14.161 0 0 0-4.35 10.5A14.167 14.167 0 0 0 7.65 28.5 14.415 14.415 0 0 0 18 32.85a14.756 14.756 0 0 0 10.5-4.35 13.572 13.572 0 0 0 4.2-10.35 14.756 14.756 0 0 0-4.35-10.5A13.392 13.392 0 0 0 18 3.3m4.8 10.2v7.35h-2.1v8.7h-5.55v-8.7H13.2V13.5a1.146 1.146 0 0 1 .3-.75c.3-.15.45-.3.75-.3h7.35a1.146 1.146 0 0 1 .75.3c.45.15.45.45.45.75m-7.35-4.65a2.55 2.55 0 1 1 5.1 0A2.3 2.3 0 0 1 18 11.4a2.234 2.234 0 0 1-2.55-2.55" fill="#333"/></svg>
              <svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36"><path data-name="Path 14345" d="M18 8.55a7.967 7.967 0 0 0-5.25 1.8 7.429 7.429 0 0 0-2.7 5.1H8.7l3.6 3.6 3.6-3.6h-1.35Q15 12.3 18.6 12.3a3.331 3.331 0 0 1 3 1.5 7.183 7.183 0 0 1 1.05 4.35 7.478 7.478 0 0 1-1.2 4.35 3.648 3.648 0 0 1-3 1.65c-2.55 0-3.75-1.05-3.9-3.3h-4.5a7.782 7.782 0 0 0 2.7 5.25A7.967 7.967 0 0 0 18 27.9a9.158 9.158 0 0 0 6.75-2.7 10.041 10.041 0 0 0 2.55-6.9 10.157 10.157 0 0 0-2.55-7.05A8.7 8.7 0 0 0 18 8.55" fill="#333"/><path data-name="Path 14346" d="M30.75 5.25A17.311 17.311 0 0 0 18 0 17.925 17.925 0 0 0 0 18a18.183 18.183 0 0 0 18 18 17.933 17.933 0 0 0 12.9-5.4A16.621 16.621 0 0 0 36 18a17.311 17.311 0 0 0-5.25-12.75m-2.25 23.1A14.756 14.756 0 0 1 18 32.7a14.415 14.415 0 0 1-10.35-4.35A14.7 14.7 0 0 1 18 3.3a13.611 13.611 0 0 1 10.35 4.35A13.926 13.926 0 0 1 32.7 18a13.572 13.572 0 0 1-4.2 10.35" fill="#333"/></svg>
              Attribution - ShareAlike (CC BY-SA)
            </div>
            <input type="radio" name="license_type" v-model="licenseLocal" value="CC BY-SA" />
            <div class="control_indicator"></div>
          </label>
          <label class="control control-radio">
            <div class="svg-label-container">
              <svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36"><path data-name="Path 14352" d="M18 0a17.311 17.311 0 0 1 12.75 5.25A17.311 17.311 0 0 1 36 18a16.621 16.621 0 0 1-5.1 12.6A17.933 17.933 0 0 1 18 36a17.463 17.463 0 0 1-12.6-5.25A17.355 17.355 0 0 1 0 18 17.925 17.925 0 0 1 18 0m0 3.3A14.167 14.167 0 0 0 7.65 7.65a14.161 14.161 0 0 0-4.35 10.5A14.167 14.167 0 0 0 7.65 28.5 14.415 14.415 0 0 0 18 32.85a14.756 14.756 0 0 0 10.5-4.35 13.572 13.572 0 0 0 4.2-10.35 14.756 14.756 0 0 0-4.35-10.5A13.392 13.392 0 0 0 18 3.3m4.8 10.2v7.35h-2.1v8.7h-5.55v-8.7H13.2V13.5a1.146 1.146 0 0 1 .3-.75c.3-.15.45-.3.75-.3h7.35a1.146 1.146 0 0 1 .75.3c.45.15.45.45.45.75m-7.35-4.65a2.55 2.55 0 1 1 5.1 0A2.3 2.3 0 0 1 18 11.4a2.234 2.234 0 0 1-2.55-2.55" fill="#333"/></svg>
              <svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36"><path data-name="Rectangle 5652" fill="#333" d="M11.7 13.8h13.05v3.15H11.7z"/><path data-name="Rectangle 5653" fill="#333" d="M11.7 19.5h13.05v3.15H11.7z"/><path data-name="Path 14340" d="M30.75 5.25A17.311 17.311 0 0 0 18 0 17.925 17.925 0 0 0 0 18a18.183 18.183 0 0 0 18 18 17.933 17.933 0 0 0 12.9-5.4A16.621 16.621 0 0 0 36 18a17.311 17.311 0 0 0-5.25-12.75m-2.25 23.1A14.756 14.756 0 0 1 18 32.7a14.415 14.415 0 0 1-10.35-4.35A14.7 14.7 0 0 1 18 3.3a13.611 13.611 0 0 1 10.35 4.35A13.926 13.926 0 0 1 32.7 18a13.572 13.572 0 0 1-4.2 10.35" fill="#333"/></svg>
              Attribution - NoDerivs (CC BY-ND)
            </div>
            <input type="radio" name="license_type" v-model="licenseLocal" value="CC BY-ND" />
            <div class="control_indicator"></div>
          </label>
          <label class="control control-radio">
            <div class="svg-label-container">
              <svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36"><path data-name="Path 14352" d="M18 0a17.311 17.311 0 0 1 12.75 5.25A17.311 17.311 0 0 1 36 18a16.621 16.621 0 0 1-5.1 12.6A17.933 17.933 0 0 1 18 36a17.463 17.463 0 0 1-12.6-5.25A17.355 17.355 0 0 1 0 18 17.925 17.925 0 0 1 18 0m0 3.3A14.167 14.167 0 0 0 7.65 7.65a14.161 14.161 0 0 0-4.35 10.5A14.167 14.167 0 0 0 7.65 28.5 14.415 14.415 0 0 0 18 32.85a14.756 14.756 0 0 0 10.5-4.35 13.572 13.572 0 0 0 4.2-10.35 14.756 14.756 0 0 0-4.35-10.5A13.392 13.392 0 0 0 18 3.3m4.8 10.2v7.35h-2.1v8.7h-5.55v-8.7H13.2V13.5a1.146 1.146 0 0 1 .3-.75c.3-.15.45-.3.75-.3h7.35a1.146 1.146 0 0 1 .75.3c.45.15.45.45.45.75m-7.35-4.65a2.55 2.55 0 1 1 5.1 0A2.3 2.3 0 0 1 18 11.4a2.234 2.234 0 0 1-2.55-2.55" fill="#333"/></svg>
              <svg xmlns="http://www.w3.org/2000/svg" width="35.85" height="36" viewBox="0 0 35.85 36"><path data-name="Path 14335" d="M30.6 5.25a17.925 17.925 0 0 0-25.35 0A17.8 17.8 0 0 0 0 18a17.117 17.117 0 0 0 5.25 12.6 16.794 16.794 0 0 0 12.6 5.4 17.687 17.687 0 0 0 12.9-5.4 16.621 16.621 0 0 0 5.1-12.6A17.554 17.554 0 0 0 30.6 5.25m-2.25 23.1a14.667 14.667 0 0 1-20.85 0A14.167 14.167 0 0 1 3.15 18a12.887 12.887 0 0 1 .75-4.8l9.3 4.2 2.85 1.2 2.1.9 1.8.9a1.362 1.362 0 0 1 .45 1.05 1.462 1.462 0 0 1-.6 1.35 3.024 3.024 0 0 1-1.65.45 6.074 6.074 0 0 1-4.05-1.65l-2.55 2.55a8.437 8.437 0 0 0 5.4 2.1v2.7h2.1v-2.7a4.942 4.942 0 0 0 3.3-1.2A4.992 4.992 0 0 0 24 22.2l6.75 3a14.633 14.633 0 0 1-2.4 3.15M22.8 17.7l-2.85-1.35-1.5-.75-2.25-1.05a.551.551 0 0 1-.15-.45 1 1 0 0 1 .6-1.05 4.438 4.438 0 0 1 1.5-.3 5.284 5.284 0 0 1 3.15 1.05l2.4-2.4a8.253 8.253 0 0 0-4.5-1.65v-2.7h-2.1V9.9a5.068 5.068 0 0 0-3 .9 4.9 4.9 0 0 0-1.65 2.25L5.55 9.9A15.146 15.146 0 0 1 7.5 7.5a14.167 14.167 0 0 1 10.35-4.35 13.552 13.552 0 0 1 10.2 4.2 14.26 14.26 0 0 1 4.35 10.5 16.35 16.35 0 0 1-.45 3.9Z" fill="#333"/></svg>
              Attribution - NonCommercial (CC BY-NC)
            </div>
            <input type="radio" name="license_type" v-model="licenseLocal" value="CC BY-NC" />
            <div class="control_indicator"></div>
          </label>
          <label class="control control-radio" v-if="$store.getters.hasRole(['ROLE_SENTINEL_HUB'])">
            <div class="svg-label-container">
              <svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36"><path data-name="Path 14352" d="M18 0a17.311 17.311 0 0 1 12.75 5.25A17.311 17.311 0 0 1 36 18a16.621 16.621 0 0 1-5.1 12.6A17.933 17.933 0 0 1 18 36a17.463 17.463 0 0 1-12.6-5.25A17.355 17.355 0 0 1 0 18 17.925 17.925 0 0 1 18 0m0 3.3A14.167 14.167 0 0 0 7.65 7.65a14.161 14.161 0 0 0-4.35 10.5A14.167 14.167 0 0 0 7.65 28.5 14.415 14.415 0 0 0 18 32.85a14.756 14.756 0 0 0 10.5-4.35 13.572 13.572 0 0 0 4.2-10.35 14.756 14.756 0 0 0-4.35-10.5A13.392 13.392 0 0 0 18 3.3m4.8 10.2v7.35h-2.1v8.7h-5.55v-8.7H13.2V13.5a1.146 1.146 0 0 1 .3-.75c.3-.15.45-.3.75-.3h7.35a1.146 1.146 0 0 1 .75.3c.45.15.45.45.45.75m-7.35-4.65a2.55 2.55 0 1 1 5.1 0A2.3 2.3 0 0 1 18 11.4a2.234 2.234 0 0 1-2.55-2.55" fill="#333"/></svg>
              <svg xmlns="http://www.w3.org/2000/svg" width="35.85" height="36" viewBox="0 0 35.85 36"><path data-name="Path 14335" d="M30.6 5.25a17.925 17.925 0 0 0-25.35 0A17.8 17.8 0 0 0 0 18a17.117 17.117 0 0 0 5.25 12.6 16.794 16.794 0 0 0 12.6 5.4 17.687 17.687 0 0 0 12.9-5.4 16.621 16.621 0 0 0 5.1-12.6A17.554 17.554 0 0 0 30.6 5.25m-2.25 23.1a14.667 14.667 0 0 1-20.85 0A14.167 14.167 0 0 1 3.15 18a12.887 12.887 0 0 1 .75-4.8l9.3 4.2 2.85 1.2 2.1.9 1.8.9a1.362 1.362 0 0 1 .45 1.05 1.462 1.462 0 0 1-.6 1.35 3.024 3.024 0 0 1-1.65.45 6.074 6.074 0 0 1-4.05-1.65l-2.55 2.55a8.437 8.437 0 0 0 5.4 2.1v2.7h2.1v-2.7a4.942 4.942 0 0 0 3.3-1.2A4.992 4.992 0 0 0 24 22.2l6.75 3a14.633 14.633 0 0 1-2.4 3.15M22.8 17.7l-2.85-1.35-1.5-.75-2.25-1.05a.551.551 0 0 1-.15-.45 1 1 0 0 1 .6-1.05 4.438 4.438 0 0 1 1.5-.3 5.284 5.284 0 0 1 3.15 1.05l2.4-2.4a8.253 8.253 0 0 0-4.5-1.65v-2.7h-2.1V9.9a5.068 5.068 0 0 0-3 .9 4.9 4.9 0 0 0-1.65 2.25L5.55 9.9A15.146 15.146 0 0 1 7.5 7.5a14.167 14.167 0 0 1 10.35-4.35 13.552 13.552 0 0 1 10.2 4.2 14.26 14.26 0 0 1 4.35 10.5 16.35 16.35 0 0 1-.45 3.9Z" fill="#333"/></svg>
              <svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36"><path data-name="Path 14345" d="M18 8.55a7.967 7.967 0 0 0-5.25 1.8 7.429 7.429 0 0 0-2.7 5.1H8.7l3.6 3.6 3.6-3.6h-1.35Q15 12.3 18.6 12.3a3.331 3.331 0 0 1 3 1.5 7.183 7.183 0 0 1 1.05 4.35 7.478 7.478 0 0 1-1.2 4.35 3.648 3.648 0 0 1-3 1.65c-2.55 0-3.75-1.05-3.9-3.3h-4.5a7.782 7.782 0 0 0 2.7 5.25A7.967 7.967 0 0 0 18 27.9a9.158 9.158 0 0 0 6.75-2.7 10.041 10.041 0 0 0 2.55-6.9 10.157 10.157 0 0 0-2.55-7.05A8.7 8.7 0 0 0 18 8.55" fill="#333"/><path data-name="Path 14346" d="M30.75 5.25A17.311 17.311 0 0 0 18 0 17.925 17.925 0 0 0 0 18a18.183 18.183 0 0 0 18 18 17.933 17.933 0 0 0 12.9-5.4A16.621 16.621 0 0 0 36 18a17.311 17.311 0 0 0-5.25-12.75m-2.25 23.1A14.756 14.756 0 0 1 18 32.7a14.415 14.415 0 0 1-10.35-4.35A14.7 14.7 0 0 1 18 3.3a13.611 13.611 0 0 1 10.35 4.35A13.926 13.926 0 0 1 32.7 18a13.572 13.572 0 0 1-4.2 10.35" fill="#333"/></svg>
              Attribution - NonCommercial - ShareAlike (CC BY-NC-SA)
            </div>
            <input type="radio" name="license_type" v-model="licenseLocal" value="CC BY-NC-SA" />
            <div class="control_indicator"></div>
          </label>
          <label class="control control-radio" v-if="$store.getters.hasRole(['ROLE_SENTINEL_HUB'])">
            <div class="svg-label-container">
              <svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36"><path data-name="Path 14352" d="M18 0a17.311 17.311 0 0 1 12.75 5.25A17.311 17.311 0 0 1 36 18a16.621 16.621 0 0 1-5.1 12.6A17.933 17.933 0 0 1 18 36a17.463 17.463 0 0 1-12.6-5.25A17.355 17.355 0 0 1 0 18 17.925 17.925 0 0 1 18 0m0 3.3A14.167 14.167 0 0 0 7.65 7.65a14.161 14.161 0 0 0-4.35 10.5A14.167 14.167 0 0 0 7.65 28.5 14.415 14.415 0 0 0 18 32.85a14.756 14.756 0 0 0 10.5-4.35 13.572 13.572 0 0 0 4.2-10.35 14.756 14.756 0 0 0-4.35-10.5A13.392 13.392 0 0 0 18 3.3m4.8 10.2v7.35h-2.1v8.7h-5.55v-8.7H13.2V13.5a1.146 1.146 0 0 1 .3-.75c.3-.15.45-.3.75-.3h7.35a1.146 1.146 0 0 1 .75.3c.45.15.45.45.45.75m-7.35-4.65a2.55 2.55 0 1 1 5.1 0A2.3 2.3 0 0 1 18 11.4a2.234 2.234 0 0 1-2.55-2.55" fill="#333"/></svg>
              <svg xmlns="http://www.w3.org/2000/svg" width="35.85" height="36" viewBox="0 0 35.85 36"><path data-name="Path 14335" d="M30.6 5.25a17.925 17.925 0 0 0-25.35 0A17.8 17.8 0 0 0 0 18a17.117 17.117 0 0 0 5.25 12.6 16.794 16.794 0 0 0 12.6 5.4 17.687 17.687 0 0 0 12.9-5.4 16.621 16.621 0 0 0 5.1-12.6A17.554 17.554 0 0 0 30.6 5.25m-2.25 23.1a14.667 14.667 0 0 1-20.85 0A14.167 14.167 0 0 1 3.15 18a12.887 12.887 0 0 1 .75-4.8l9.3 4.2 2.85 1.2 2.1.9 1.8.9a1.362 1.362 0 0 1 .45 1.05 1.462 1.462 0 0 1-.6 1.35 3.024 3.024 0 0 1-1.65.45 6.074 6.074 0 0 1-4.05-1.65l-2.55 2.55a8.437 8.437 0 0 0 5.4 2.1v2.7h2.1v-2.7a4.942 4.942 0 0 0 3.3-1.2A4.992 4.992 0 0 0 24 22.2l6.75 3a14.633 14.633 0 0 1-2.4 3.15M22.8 17.7l-2.85-1.35-1.5-.75-2.25-1.05a.551.551 0 0 1-.15-.45 1 1 0 0 1 .6-1.05 4.438 4.438 0 0 1 1.5-.3 5.284 5.284 0 0 1 3.15 1.05l2.4-2.4a8.253 8.253 0 0 0-4.5-1.65v-2.7h-2.1V9.9a5.068 5.068 0 0 0-3 .9 4.9 4.9 0 0 0-1.65 2.25L5.55 9.9A15.146 15.146 0 0 1 7.5 7.5a14.167 14.167 0 0 1 10.35-4.35 13.552 13.552 0 0 1 10.2 4.2 14.26 14.26 0 0 1 4.35 10.5 16.35 16.35 0 0 1-.45 3.9Z" fill="#333"/></svg>
              <svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36"><path data-name="Rectangle 5652" fill="#333" d="M11.7 13.8h13.05v3.15H11.7z"/><path data-name="Rectangle 5653" fill="#333" d="M11.7 19.5h13.05v3.15H11.7z"/><path data-name="Path 14340" d="M30.75 5.25A17.311 17.311 0 0 0 18 0 17.925 17.925 0 0 0 0 18a18.183 18.183 0 0 0 18 18 17.933 17.933 0 0 0 12.9-5.4A16.621 16.621 0 0 0 36 18a17.311 17.311 0 0 0-5.25-12.75m-2.25 23.1A14.756 14.756 0 0 1 18 32.7a14.415 14.415 0 0 1-10.35-4.35A14.7 14.7 0 0 1 18 3.3a13.611 13.611 0 0 1 10.35 4.35A13.926 13.926 0 0 1 32.7 18a13.572 13.572 0 0 1-4.2 10.35" fill="#333"/></svg>
              Attribution - NonCommercial - NoDerivs (CC BY-NC-ND)
            </div>
            <input type="radio" name="license_type" v-model="licenseLocal" value="CC BY-NC-ND" />
            <div class="control_indicator"></div>
          </label>
          <div class="errors" v-if="errors">
            <span v-for="error in errors" v-bind:key="error">{{ error }}</span>
          </div>
        </div>
      </validation-provider>
    </div>
  </validation-observer>
</template>
<script lang="ts">
import {
  Component, Vue, Watch, Prop,
} from 'vue-property-decorator';
import { ValidationProvider, ValidationObserver, extend } from 'vee-validate';
import { required } from 'vee-validate/dist/rules';

extend('required', required);

@Component({
  components: {
    ValidationProvider,
    ValidationObserver,
  },
})
export default class License extends Vue {
  @Prop({ required: true }) private license!: string;

  $refs!: {
    refObserver: InstanceType<typeof ValidationObserver>;
  };

  licenseLocal: string;

  constructor() {
    super();

    this.licenseLocal = this.license;
  }

  @Watch('license', { immediate: true })
  onLicenseChange(license: string): void {
    this.licenseLocal = license;
  }

  @Watch('licenseLocal')
  onLicenseLocal(license: string): void {
    this.$emit('update:license', license);
  }
}
</script>
<style lang="scss">
@import '@/assets/styles/_assets.scss';

.svg-label-container {
  display: flex;
  align-items: center;
  margin-top: -0.52rem;
  font-size: em(18);
  font-weight: 500;
  letter-spacing: 0.03em;
  color: $labelColor;

  svg {
    margin-right: 7px;
  }
}
</style>
